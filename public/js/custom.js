function deleteRecord(e,t){var n,a,i,o=$("meta[name=csrf-token]").attr("content"),s=$(e).data("id");i=t,a="attachment"===t?$(e).parent(".chip"):$("."+t+"-"+s),n="/"+t+"/"+s,"profile"!==t&&"training-user"!==t||(n=$(e).data("url"),i=$(e).data("type"),a="profile"===t?$(e).closest("li"):$(e).closest("tr")),a.addClass("red accent-1"),confirm("Are you sure you wish to delete this "+i+"?")&&$.ajax({url:root+n,type:"post",data:{_method:"delete",_token:o},success:function(){a.remove(),Materialize.toast("The selected "+i+" was deleted successfully.",4e3)}}),a.removeClass("red accent-1")}function trainingAssignmentFilters(e){$("#assignment_buttons .btn").removeClass("active");var t=$("#new-training #training_due_date"),n=$("#new-training #user_field"),a=$("#new-training #group_field");"due_date"===e?(t.show(),n.show(),a.show()):(t.hide(),n.hide(),a.hide())}function formatToday(){var e=new Date,t=""+(e.getMonth()+1),n=""+e.getDate(),a=e.getFullYear();return t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),[a,t,n].join("-")}$(document).ready(function(){$("#_new_user_groups_field").change(function(){var e=$(this).val();$(".closed-area").hide(),$.each(e,function(e,t){$("#access-"+t).show()})})}),$(document).ready(function(){$(".delete-record").click(function(){deleteRecord(this,"profile")}),$(".delete-group").click(function(){deleteRecord(this,"group")}),$(".delete-user").click(function(){deleteRecord(this,"user")}),$(".delete-training").click(function(){deleteRecord(this,"training")}),$(".delete-training-user").click(function(){deleteRecord(this,"training-user")}),$(".delete-duty").click(function(){deleteRecord(this,"duty")}),$(".delete-news").click(function(){deleteRecord(this,"news")}),$(".delete-attachment").click(function(){deleteRecord(this,"attachment")})}),$(function(){var e=[],t=[],n="",a="";$(".duty-swap").click(function(){$(this).removeClass("btn-default").addClass("btn-success");var i=e.length;if(e[i]=$(this).data("id"),t[i]=$(this).data("date"),n=$(this).data("duty"),a=$(this).data("type"),1===i&&e[0]===e[1]&&(e.pop(),t.pop()),1===i){var o=$("<form>",{method:"POST",action:root+"/duty-swap",target:"_top"}).append($("<input>",{name:"_token",type:"hidden",value:$("meta[name=csrf-token]").attr("content")})).append($("<input>",{name:"id",type:"hidden",value:e})).append($("<input>",{name:"date",type:"hidden",value:t})).append($("<input>",{name:"duty",type:"hidden",value:n})).append($("<input>",{name:"type",type:"hidden",value:a}));o.appendTo("body").submit()}})}),$(function(){$("#email").keypress(function(){var e=$("#email").val(),t=e.split("@");$("#username").val(t[0])})}),$(document).ready(function(e){var t=new Bloodhound({prefetch:{url:root+"/search",filter:function(t){return e.map(t.data.user,function(e){return{name:e.last_name+", "+e.first_name,id:e.id,employeeNumber:e.emp_num}})}},datumTokenizer:function(e){var t=Bloodhound.tokenizers.whitespace(e.name),n=Bloodhound.tokenizers.whitespace(e.employeeNumber);return t.concat(n)},queryTokenizer:Bloodhound.tokenizers.whitespace});t.initialize(),e(".search-input").typeahead({minLength:2,highlight:!0},{source:t.ttAdapter(),display:"name",name:"usersList",templates:{empty:["<div class='list-group search-results-dropdown'><div class='list-group-item' style='color:black'>Nothing found.</div></div>"],suggestion:function(e){return"<div><a href="+root+"/user/"+e.id+" class='list-group-item'>"+e.name+" <small>("+e.employeeNumber+")</small></a></div>"}}})}),$(document).ready(function(){$(".button-collapse").sideNav(),$(".tooltipped").tooltip(),$(".modal-trigger").leanModal(),$(".dropdown-button").dropdown({hover:!0,belowOrigin:!0}),$(".datepicker").pickadate({onSet:function(e){"select"in e&&this.close()},format:"yyyy-mm-dd",container:"body",selectYears:!0,selectMonths:!0}),$(".data-table").DataTable({paging:!1}),$("div.alert").not(".note").delay(8e3).slideUp(500),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$("meta[name='csrf-token']").attr("content")}}),$("#js-upload").change(function(){$("#attachments-form").submit()}),$("select").material_select()}),$(function(){trainingAssignmentFilters("none"),$("#ab-due-date").click(function(){trainingAssignmentFilters("due_date")}),$("#ab-none").click(function(){trainingAssignmentFilters("none")})}),$(function(){$(".completed-today").click(function(){var e=formatToday(),t=$(this).data("id"),n=$(this).data("user"),a=$("meta[name=csrf-token]").attr("content");$(this).closest("tr").children(".training_completed_date").text(e),$(this).hide(),$(this).closest("td").children("a").hide(),$.ajax({url:root+"/user/"+n+"/training/"+t,type:"post",data:{_method:"put",_token:a,completed_date:e},success:function(e){}})})}),$(function(){$("#group_field select").on("change",function(e){var t=$("meta[name=csrf-token]").attr("content"),n=$(this).val();$.ajax({url:root+"/group-user-id",type:"post",data:{_method:"post",_token:t,groups:n},success:function(e){"string"==typeof e?$("select.User-select").val(""):"object"==typeof e&&$("select.User-select").val(e),$("select").material_select()}})})});